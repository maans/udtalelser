<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elevudtalelser (statisk)</title>
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <header class="topbar no-print">
    <div class="brand">
      <span class="dot"></span>
      <span>Elevudtalelser</span>
    </div>

    <nav class="tabs" aria-label="Navigation">
      <button id="tab-k"   class="tab" data-tab="k"   title="K-elever">üë§ <span>K-elever</span></button>
      <button id="tab-edit"class="tab" data-tab="edit" title="Redig√©r">‚úçÔ∏è <span>Redig√©r</span></button>
      <button id="tab-set" class="tab" data-tab="set" title="Indstillinger">‚öôÔ∏è <span>Indstillinger</span></button>
    </nav>

    <div class="status">
      <span id="statusText" class="statusText"></span>
    </div>
  </header>

  <main class="app">
    <!-- K-elever -->
    <section id="view-k" class="view">
      <div class="viewHeader">
        <h1>K-elever</h1>
        <p class="muted">Viser kun elever hvor Kontaktl√¶rer1 eller Kontaktl√¶rer2 matcher <b>‚ÄúJeg er‚Äù</b>.</p>
      </div>

      <div id="kMessage" class="callout"></div>
      <div id="kList" class="list"></div>
    </section>

    <!-- Redig√©r -->
    <section id="view-edit" class="view">
      <div class="viewHeader">
        <h1>Redig√©r</h1>
        <div class="row gap">
          <div class="pill" id="editStudentPill">Ingen elev valgt</div>
          <div class="pill muted" id="autosavePill"></div>
          <button class="btn no-print" id="btnPrint">üñ®Ô∏è Print / Gem som PDF</button>
        </div>
      </div>

      <div id="editMessage" class="callout"></div>

      <div class="split">
        <div class="panel">
          <details open class="fold">
            <summary>Elevudvikling</summary>
            <textarea id="txtElevudv" rows="8" placeholder="Skriv elevudvikling‚Ä¶"></textarea>
          </details>

          <details class="fold">
            <summary>Praktisk afsnit</summary>
            <textarea id="txtPraktisk" rows="7" placeholder="Skriv praktisk afsnit‚Ä¶"></textarea>
          </details>

          <details class="fold">
            <summary>Funktion i kontaktgruppen</summary>
            <textarea id="txtKgruppe" rows="7" placeholder="Skriv kontaktgruppe-afsnit‚Ä¶"></textarea>
          </details>

          <div class="card no-print">
            <div class="cardTitle">Elevens eget input (PDF/Word)</div>
            <div class="row gap wrap">
              <input id="fileStudentInput" type="file" accept=".pdf,.doc,.docx,.odt,.rtf,.txt" />
              <button id="btnClearStudentInput" class="btn ghost" type="button">Fjern</button>
            </div>
            <div id="studentInputMeta" class="muted small"></div>
            <div class="muted small">Tip: √Öbn filen ved siden af og copy/paste/omskriv.</div>
          </div>
        </div>

        <div class="panel">
          <div class="card print-only">
            <div class="cardTitle">Udtalelse</div>
          </div>
          <article id="preview" class="preview"></article>
        </div>
      </div>
    </section>

    <!-- Indstillinger -->
    <section id="view-set" class="view">
      <div class="viewHeader">
        <h1>Indstillinger</h1>
        <p class="muted">Alt gemmes lokalt i denne browser (localStorage). Ingen server.</p>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="cardTitle">Lokal lagring</div>
          <button id="btnReset" class="btn danger" type="button">üßπ Ryd alle lokale data (denne browser)</button>
          <div class="muted small">Sletter alle n√∏gler der starter med <code>udt_</code> og genstarter appen.</div>
        </div>

        <div class="card">
          <div class="cardTitle">Navne og periode</div>

          <div class="field">
            <label>Forstandernavn</label>
            <div class="row gap">
              <input id="forstanderName" type="text" />
              <button id="btnToggleForstander" class="btn ghost" type="button" title="L√•s op / l√•s">‚úèÔ∏è</button>
            </div>
          </div>

          <div class="field">
            <label>Jeg er (initialer eller navn)</label>
            <input id="meInput" type="text" placeholder="fx MM, RD, MTP eller fuldt navn" />
            <div class="muted small">Fortolkes via alias-map og bruges til filter af K-elever.</div>
          </div>

          <div class="field">
            <label>Skole√•r (slut-√•r)</label>
            <input id="schoolYearEnd" type="number" min="2000" max="2100" step="1" />
          </div>

          <div class="field">
            <label>Periode fra (auto)</label>
            <input id="periodFrom" type="text" readonly />
          </div>

          <div class="field">
            <label>Dato m√•ned/√•r (auto)</label>
            <input id="dateMonthYear" type="text" readonly />
          </div>

          <div class="field">
            <label>Kontaktgruppe antal (auto)</label>
            <input id="contactCount" type="text" readonly />
          </div>
        </div>

        <div class="card">
          <div class="cardTitle">Elevliste (CSV) ‚Äì skal indl√¶ses f√∏rst</div>
          <input id="studentsFile" type="file" accept=".csv,.txt" />
          <div id="studentsStatus" class="muted small"></div>
          <details class="fold no-print">
            <summary>Accepterede kolonner (eksempler)</summary>
            <div class="muted small">
              <div><b>Prim√¶rt:</b> Fornavn, Efternavn, Unilogin, K√∏n, Kontaktl√¶rer1, Kontaktl√¶rer2, Klasse</div>
              <div><b>Uni-C:</b> Klasse, Fornavn, Efternavn, Uni-C brugernavn, K√∏n, Relationer-Kontaktl√¶rer-Navn, Relationer-Anden kontaktl√¶rer-Navn</div>
              <div>Appen mapper kolonner robust (case-insensitivt, trim, accepter Unilogin/Uni-C brugernavn).</div>
            </div>
          </details>
        </div>

        <div class="card">
          <div class="cardTitle">Skolens standardtekst</div>
          <div class="row gap wrap no-print">
            <button id="btnToggleSchoolText" class="btn ghost" type="button">‚úèÔ∏è Redig√©r</button>
            <button id="btnRestoreSchoolText" class="btn ghost" type="button">‚Ü©Ô∏è Gendan standard</button>
          </div>
          <textarea id="schoolText" rows="10"></textarea>
        </div>
      </div>

      <div class="card no-print">
        <div class="cardTitle">Fagl√¶rer-arbejde (producer CSV til deling)</div>
        <div class="row gap wrap">
          <label class="muted small">Type</label>
          <select id="marksType">
            <option value="sang">Sang</option>
            <option value="gym">Gym/roller</option>
            <option value="elevraad">Elevr√•d</option>
          </select>
          <button id="btnExportMarks" class="btn" type="button">‚¨áÔ∏è Eksport√©r CSV</button>
        </div>
        <div id="marksTableWrap" class="tableWrap"></div>
        <div class="muted small">Tip: Fagl√¶rervalg gemmes ogs√• lokalt, s√• man kan forts√¶tte senere.</div>
      </div>

      <div class="card no-print">
        <div class="cardTitle">Import af fagl√¶rer-CSV‚Äôer (for kontaktl√¶rere)</div>
        <div class="grid3">
          <div class="field">
            <label>sang_marks.csv</label>
            <input id="importSang" type="file" accept=".csv,.txt" />
          </div>
          <div class="field">
            <label>gym_marks.csv</label>
            <input id="importGym" type="file" accept=".csv,.txt" />
          </div>
          <div class="field">
            <label>elevraad_marks.csv</label>
            <input id="importElevraad" type="file" accept=".csv,.txt" />
          </div>
        </div>
        <div id="importStatus" class="muted small"></div>
      </div>

    </section>
  </main>

  <footer class="footer no-print">
    <span class="muted small">Statisk app til GitHub Pages ¬∑ localStorage-prefix: <code>udt_</code></span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
