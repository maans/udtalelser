<!DOCTYPE html>

<html lang="da">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Elevudtalelser (statisk)</title>
<link href="app.css" rel="stylesheet"/>
</head>
<body>
<header class="topbar no-print">
<div class="brand">
<span class="dot"></span>
<span>Elevudtalelser</span>
</div>
<nav aria-label="Navigation" class="tabs">
<button class="tab" data-tab="k" id="tab-k" title="K-elever">ğŸ‘¤ <span>K-elever</span></button>
<button class="tab" data-tab="edit" id="tab-edit" title="RedigÃ©r">âœï¸ <span>RedigÃ©r</span></button>
<button class="tab" data-tab="set" id="tab-set" title="Indstillinger">âš™ï¸ <span>Indstillinger</span></button>
</nav>
<div class="status">
<span class="statusText" id="statusText"></span>
<button class="btn small no-print" id="btnReload">â†» Reload</button></div>
</header>
<main class="app">
<!-- K-elever -->
<section class="view" id="view-k">
<div class="viewHeader">
<h1>K-elever</h1>
<p class="muted">Viser kun elever hvor KontaktlÃ¦rer1 eller KontaktlÃ¦rer2 matcher <b>â€œJeg erâ€</b>.</p>
</div>
<div class="callout" id="kMessage"></div>
<div class="list" id="kList"></div>
</section>
<!-- RedigÃ©r -->
<section class="view" id="view-edit">
<div class="viewHeader no-print">
<h1>RedigÃ©r</h1>
<div class="row gap wrap">
<div class="pill" id="editStudentPill">Ingen elev valgt</div>
<div class="pill muted" id="autosavePill"></div>
<button class="btn small no-print" id="btnPrevStudent" type="button" title="Forrige elev">â—€ Forrige</button>
<button class="btn small no-print" id="btnNextStudent" type="button" title="NÃ¦ste elev">NÃ¦ste â–¶</button>
<button class="btn no-print" id="btnPrint">ğŸ–¨ï¸ Print / Gem som PDF</button>
</div>
</div>
<div class="callout no-print" id="editMessage"></div>
<div class="split">
<div class="panel no-print">
<details class="fold" open="" id="secElevudv">
<summary>Elevudvikling <span class="secRatio" id="ratioElevudv"></span></summary>
<textarea id="txtElevudv" placeholder="Skriv elevudviklingâ€¦" rows="8"></textarea>
</details>
<details class="fold" id="secPraktisk">
<summary>Praktisk afsnit <span class="secRatio" id="ratioPraktisk"></span></summary>
<textarea id="txtPraktisk" placeholder="Skriv praktisk afsnitâ€¦" rows="7"></textarea>
</details>
<details class="fold" id="secKgruppe">
<summary>Funktion i kontaktgruppen <span class="secRatio" id="ratioKgruppe"></span></summary>
<textarea id="txtKgruppe" placeholder="Skriv kontaktgruppe-afsnitâ€¦" rows="7"></textarea>
</details>
<div class="card no-print">
<div class="cardTitle">Elevens eget input (PDF/Word)</div>
<div class="row gap wrap">
<input accept=".pdf,.doc,.docx,.odt,.rtf,.txt" id="fileStudentInput" type="file"/><button class="btn small" id="btnOpenStudentInput" type="button">Ã…bn fil</button>
<button class="btn ghost" id="btnClearStudentInput" type="button">Fjern</button>
</div>
<div class="muted small" id="studentInputMeta"></div>
<div class="muted small">
              NÃ¥r du vÃ¦lger en fil, Ã¥bnes den i en ny fane. Appen gemmer kun filnavn + tidspunkt (ikke selve filen).
              <br/>BemÃ¦rk: browseren kan ikke genÃ¥bne filen automatisk efter genstart â€“ men du kan vÃ¦lge den igen.
            </div>
</div>
</div>
<div class="panel">
<article class="preview" id="preview"></article>
</div>
</div>
</section>
<!-- Indstillinger -->
<section class="view" id="view-set">
<div class="viewHeader">
<h1>Indstillinger</h1>
<p class="muted">Alt gemmes lokalt i denne browser (localStorage). Ingen server.</p>
</div>
<div class="grid2">
<!-- Venstre: System & Data -->
<div class="card">
<div class="cardTitle">Data &amp; nulstil</div>
<button class="btn danger" id="btnReset" type="button">ğŸ§¹ Ryd alle lokale data (denne browser)</button>
<div class="muted small" style="margin:.5rem 0 1rem 0">
            Sletter alle nÃ¸gler der starter med <code>udt_</code> og genstarter appen.
          </div>
<div class="cardSubTitle">Elevliste (CSV) â€“ skal indlÃ¦ses fÃ¸rst</div>
<input accept=".csv,.txt" id="studentsFile" type="file"/>
<div class="muted small" id="studentsStatus" style="margin-top:.35rem"></div>
<details class="fold no-print" style="margin-top:.8rem">
<summary>Accepterede kolonner (eksempler)</summary>
<div class="muted small">
<div><b>PrimÃ¦rt:</b> Fornavn, Efternavn, Unilogin, KÃ¸n, KontaktlÃ¦rer1, KontaktlÃ¦rer2, Klasse</div>
<div><b>Uni-C:</b> Klasse, Fornavn, Efternavn, Uni-C brugernavn, KÃ¸n, Relationer-KontaktlÃ¦rer-Navn, Relationer-Anden kontaktlÃ¦rer-Navn</div>
<div>Appen mapper kolonner robust (case-insensitivt, trim, accepter Unilogin/Uni-C brugernavn).</div>
</div>
</details>
<div class="divider"></div>
<div class="cardSubTitle">Import af faglÃ¦rer-CSVâ€™er (for kontaktlÃ¦rere)</div>
<div class="grid3">
<div class="field">
<label>sang_marks.csv</label>
<input accept=".csv,.txt" id="importSang" type="file"/>
</div>
<div class="field">
<label>gym_marks.csv</label>
<input accept=".csv,.txt" id="importGym" type="file"/>
</div>
<div class="field">
<label>elevraad_marks.csv</label>
<input accept=".csv,.txt" id="importElevraad" type="file"/>
</div>
</div>
<div class="muted small" id="importStatus"></div>
</div>
<!-- HÃ¸jre: Identitet + skabeloner -->
<div class="card">
<div class="cardTitle">Navne og periode</div>
<div class="field">
<label>Forstandernavn</label>
<div class="row gap">
<input id="forstanderName" type="text"/>
<button class="btn ghost" id="btnToggleForstander" title="LÃ¥s op / lÃ¥s" type="button">âœï¸</button>
</div>
</div>
<details class="fold" id="schoolTextFold">
<summary>Skolens standardtekst</summary>
<div class="row gap wrap" style="margin:.5rem 0">
<button class="btn ghost" id="btnToggleSchoolText" type="button">âœï¸ RedigÃ©r</button>
<button class="btn ghost" id="btnRestoreSchoolText" type="button">â†©ï¸ Gendan standard</button>
</div>
<textarea id="schoolText" rows="10"></textarea>
</details>
<div class="field">
<label>Jeg er (initialer eller navn)</label>
<input id="meInput" placeholder="fx MM, RD, MTP eller fuldt navn" type="text"/>
<div class="muted small">Fortolkes via alias-map og bruges til filter af K-elever.</div>
</div>
<div class="field">
<label>SkoleÃ¥r (slut-Ã¥r)</label>
<input id="schoolYearEnd" max="2100" min="2000" step="1" type="number"/>
</div>
<div class="field">
<label>Periode fra (auto)</label>
<input id="periodFrom" readonly="" type="text"/>
</div>
<div class="field">
<label>Dato mÃ¥ned/Ã¥r (auto)</label>
<input id="dateMonthYear" readonly="" type="text"/>
</div>
<div class="field">
<label>Kontaktgruppe antal (auto)</label>
<input id="contactCount" readonly="" type="text"/>
</div>
<details class="fold" id="templateFold">
<summary>Udtalelses-skabelon (med placeholders)</summary>
<div class="row gap wrap" style="margin:.5rem 0">
<button class="btn ghost" id="btnToggleTemplate" type="button">âœï¸ RedigÃ©r</button>
<button class="btn ghost" id="btnRestoreTemplate" type="button">â†©ï¸ Gendan standard</button>
</div>
<textarea id="templateText" rows="14"></textarea>
<div class="muted small">Brug placeholders som <code>{{ELEV_FORNAVN}}</code>, <code>{{SANG_AFSNIT}}</code>, <code>{{PRAKTISK_AFSNIT}}</code> osv.</div>
</details>

<details class="fold" id="templatesShareFold">
<summary>Del / importÃ©r skabeloner (leder)</summary>
<div class="muted small" style="margin:.35rem 0 .6rem 0">
  GÃ¦lder <b>Forstandernavn</b>, <b>Skolens standardtekst</b> og <b>Udtalelses-skabelon</b>. Download filen og del den med kolleger.
</div>
<div class="row gap wrap" style="margin:.5rem 0">
  <button class="btn" id="btnDownloadTemplates" type="button">â¬‡ï¸ Download skabeloner</button>
  <button class="btn ghost" id="btnImportTemplates" type="button">â¬†ï¸ ImportÃ©r skabeloner</button>
  <input id="fileImportTemplates" type="file" accept=".json" style="display:none"/>
</div>
</details>
</div>
</div>
<div class="card no-print" style="margin-top:1rem">
  <div class="cardTitle">FaglÃ¦rer-tekster (snippets)</div>
  <div class="muted small" style="margin-bottom:.5rem">
    RedigÃ©r tekster direkte her. NÃ¥r du klikker â€œDownload Ã¦ndringerâ€, fÃ¥r du en fil du kan sende til MÃ¥ns.
  </div>

  <details open>
    <summary><b>Sang</b> (3 niveauer)</summary>
    <div class="row gap wrap" style="margin:.5rem 0">
      <button class="btn" id="btnDownloadSang" type="button">â¬‡ï¸ Download Ã¦ndringer</button>
      <button class="btn ghost" id="btnImportSang" type="button">â¬†ï¸ ImportÃ©r Ã¦ndringer</button>
      <button class="btn ghost" id="btnRestoreSang" type="button">â†©ï¸ Gendan standard</button>
      <input id="fileImportSang" type="file" accept=".json" style="display:none"/>
    </div>

    <div class="field">
      <label>Niveau 1 â€“ titel</label>
      <input id="sangLabel_S1" type="text">
    </div>
    <div class="field">
      <label>Niveau 1 â€“ tekst</label>
      <textarea id="sangText_S1" rows="3"></textarea>
    </div>

    <div class="field">
      <label>Niveau 2 â€“ titel</label>
      <input id="sangLabel_S2" type="text">
    </div>
    <div class="field">
      <label>Niveau 2 â€“ tekst</label>
      <textarea id="sangText_S2" rows="3"></textarea>
    </div>

    <div class="field">
      <label>Niveau 3 â€“ titel</label>
      <input id="sangLabel_S3" type="text">
    </div>
    <div class="field">
      <label>Niveau 3 â€“ tekst</label>
      <textarea id="sangText_S3" rows="3"></textarea>
    </div>

    <div class="muted small">Brug fx <code>{{FORNAVN}}</code>. (Appen indsÃ¦tter automatisk korrekt fornavn.)</div>
  </details>

  <details>
    <summary><b>Gymnastik</b> (3 niveauer + roller)</summary>
    <div class="row gap wrap" style="margin:.5rem 0">
      <button class="btn" id="btnDownloadGym" type="button">â¬‡ï¸ Download Ã¦ndringer</button>
      <button class="btn ghost" id="btnImportGymSnippets" type="button">â¬†ï¸ ImportÃ©r Ã¦ndringer</button>
      <button class="btn ghost" id="btnRestoreGymSnippets" type="button">â†©ï¸ Gendan standard</button>
      <button class="btn ghost" id="btnAddRole" type="button">â• TilfÃ¸j rolle</button>
      <input id="fileImportGymSnippets" type="file" accept=".json" style="display:none"/>
    </div>

    <div class="field">
      <label>Niveau 1 â€“ titel</label>
      <input id="gymLabel_G1" type="text">
    </div>
    <div class="field">
      <label>Niveau 1 â€“ tekst</label>
      <textarea id="gymText_G1" rows="3"></textarea>
    </div>

    <div class="field">
      <label>Niveau 2 â€“ titel</label>
      <input id="gymLabel_G2" type="text">
    </div>
    <div class="field">
      <label>Niveau 2 â€“ tekst</label>
      <textarea id="gymText_G2" rows="3"></textarea>
    </div>

    <div class="field">
      <label>Niveau 3 â€“ titel</label>
      <input id="gymLabel_G3" type="text">
    </div>
    <div class="field">
      <label>Niveau 3 â€“ tekst</label>
      <textarea id="gymText_G3" rows="3"></textarea>
    </div>

    <hr style="margin:1rem 0;border:none;border-top:1px solid var(--border)"/>
    <div class="muted small" style="margin-bottom:.5rem">Roller (fx FanebÃ¦rer, Redskabsholdet, DGI). Slet fjerner rollen.</div>
    <div id="gymRolesList"></div>
  </details>

  <details>
    <summary><b>ElevrÃ¥d</b></summary>
    <div class="row gap wrap" style="margin:.5rem 0">
      <button class="btn" id="btnDownloadElevraad" type="button">â¬‡ï¸ Download Ã¦ndringer</button>
      <button class="btn ghost" id="btnImportElevraadSnippets" type="button">â¬†ï¸ ImportÃ©r Ã¦ndringer</button>
      <button class="btn ghost" id="btnRestoreElevraad" type="button">â†©ï¸ Gendan standard</button>
      <input id="fileImportElevraadSnippets" type="file" accept=".json" style="display:none"/>
    </div>
    <div class="field">
      <label>ElevrÃ¥d â€“ tekst</label>
      <textarea id="elevraadText" rows="4"></textarea>
    </div>
  </details>
</div>

<div class="card no-print" style="margin-top:1rem">
<div class="cardTitle">FaglÃ¦rer-arbejde (producer CSV til deling)</div>
<div class="row gap wrap">
<label class="muted small">Type</label>
<select id="marksType">
<option value="sang">Sang</option>
<option value="gym">Gym/roller</option>
<option value="elevraad">ElevrÃ¥d</option>
</select>
<label class="muted small">Find elev</label>
<input class="search" id="marksSearch" placeholder="SÃ¸g pÃ¥ navnâ€¦" type="text"/>
<button class="btn" id="btnExportMarks" type="button">â¬‡ï¸ EksportÃ©r CSV</button>
</div>
<div class="muted small" id="marksLegend" style="margin-top:.6rem"></div>
<div class="tableWrap" id="marksTableWrap"></div>
</div>
</section>
</main>
<footer class="footer no-print">
<span class="muted small">Statisk app til GitHub Pages Â· localStorage-prefix: <code>udt_</code></span>
</footer>
<script src="app.js"></script>
</body>
</html>
